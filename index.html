<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Timer</title>
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%2300d2b4'/%3E%3Cpath d='M32 14v20l12 8' stroke='%2304212d' stroke-width='6' fill='none' stroke-linecap='round'/%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-a" aria-hidden="true"></div>
    <div class="bg-shape bg-shape-b" aria-hidden="true"></div>
    <button id="settingsButton" type="button" class="settings-btn" aria-label="Einstellungen öffnen">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
      </svg>
    </button>
    <main class="app">
      <div id="sessionScreen" class="session-screen">
        <header class="app__header">
          <p class="eyebrow">Scrum Daily</p>
          <h1 id="mainTitle">Daily-Uhr</h1>
          <p id="mainSubtitle" class="subtitle">Gesamtzeit und Redezeit pro Person live im Blick.</p>
        </header>

        <section id="setupPanel" class="panel setup" aria-label="Einstellungen">
          <form id="setupForm" class="setup__form">
            <label class="field">
              <span>Gesamtzeit (Minuten)</span>
              <input
                id="totalMinutes"
                name="totalMinutes"
                type="number"
                min="1"
                step="1"
                value="15"
                required
              />
            </label>
            <div class="field field--crew">
              <span>Teilnehmer</span>
              <div id="crewChips" class="chips-container chips-container--setup"></div>
              <p id="crewEmptyHint" class="crew-empty-hint" hidden>Keine Besatzung konfiguriert. Klicke auf das Zahnrad.</p>
            </div>
            <button id="startButton" type="submit" class="btn btn--primary">
              Daily starten
            </button>
          </form>
        </section>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal-overlay" hidden>
          <div class="modal">
            <div class="modal__header">
              <h2>Feste Besatzung</h2>
              <button id="settingsCloseButton" type="button" class="modal__close" aria-label="Schließen">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
            <div class="modal__body">
              <label class="field">
                <span>Teammitglieder (einer pro Zeile)</span>
                <textarea
                  id="crewTextarea"
                  name="crewNames"
                  rows="8"
                  placeholder="Max Mustermann&#10;Anna Schmidt&#10;Peter Meyer"
                ></textarea>
              </label>
            </div>
            <div class="modal__footer">
              <button id="settingsShareButton" type="button" class="btn btn--ghost">
                Teilen
              </button>
              <button id="settingsSaveButton" type="button" class="btn btn--primary">
                Speichern
              </button>
            </div>
          </div>
        </div>

        <section id="sessionTimers" class="timers" aria-live="polite">
          <article id="totalCard" class="panel timer-card">
            <div class="timer-card__meta">
              <h2>Gesamtzeit</h2>
              <p id="totalHint">Verbleibende Zeit</p>
            </div>
            <p id="totalTime" class="timer-value">15:00</p>
            <div class="progress" aria-hidden="true">
              <div id="totalProgress" class="progress__bar"></div>
            </div>
          </article>

          <article id="speakerCard" class="panel timer-card">
            <div class="timer-card__meta">
              <h2 id="speakerName">Aktuelle Person</h2>
              <p id="speakerHint">Verbleibende Redezeit</p>
            </div>
            <p id="speakerTime" class="timer-value">01:09</p>
            <div class="progress" aria-hidden="true">
              <div id="speakerProgress" class="progress__bar"></div>
            </div>
          </article>
        </section>

        <section id="sessionControls" class="panel controls">
          <div id="participantsSection" class="participants-section">
            <div class="participants-meta" aria-live="polite">
              <p id="currentSpeakerBadge" class="meta-pill">Aktuell: -</p>
              <p class="meta-pill"><span id="remainingCount">0</span> offen</p>
              <p class="meta-pill"><span id="completedCount">0</span> fertig</p>
            </div>

            <div class="participants-group participants-group--queue">
              <p class="participants-label">Als Nächstes wählen</p>
              <p class="participants-hint">Tippe auf die nächste Person, sobald die aktuelle fertig ist.</p>
              <div id="remainingChips" class="chips-container chips-container--queue"></div>
              <p id="nextEmptyHint" class="chips-empty-hint" hidden>Niemand mehr offen. Daily kann abgeschlossen werden.</p>
              <p id="statusText" class="status-text">Bitte Einstellungen prüfen und starten.</p>
            </div>

            <div id="completedGroup" class="participants-group participants-group--done">
              <p class="participants-label">Bereits fertig</p>
              <div id="completedChips" class="chips-container"></div>
            </div>

            <div id="attendanceGroup" class="participants-group participants-group--attendance">
              <div class="participants-group__header">
                <p class="participants-label">Heute im Daily (an/abwesend)</p>
                <button id="attendanceToggle" type="button" class="inline-toggle" aria-expanded="true" aria-controls="attendanceBody">
                  Einklappen
                </button>
              </div>
              <div id="attendanceBody" class="participants-group__body">
                <p class="participants-hint">Hier kannst du Personen bei Bedarf entfernen oder wieder hinzufügen.</p>
                <div id="dailyCrewChips" class="chips-container"></div>
              </div>
            </div>
          </div>

          <div class="controls__buttons">
            <p id="mobileActionHint" class="mobile-action-hint" aria-live="polite"></p>
            <button id="resetButton" type="button" class="btn">
              Daily abbrechen
            </button>
          </div>
        </section>
      </div>

      <section id="farewellScreen" class="panel farewell" hidden>
        <div class="farewell__content">
          <p id="farewellMeta" class="eyebrow">Daily abgeschlossen</p>
          <h2>Danke für eure Zeit</h2>
          <p class="farewell__subtitle">Happy Hacking</p>
          <button id="restartButton" type="button" class="btn btn--primary">
            Neue Runde starten
          </button>
        </div>
      </section>
    </main>

    <script type="module" src="./app.js"></script>
  </body>
</html>
